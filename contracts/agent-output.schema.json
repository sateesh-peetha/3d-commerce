{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "Agent Output",
    "description": "Standard output format for all agents",
    "type": "object",
    "required": [
        "agent",
        "input_spec_hash",
        "output_type",
        "artifacts",
        "assumptions",
        "violations"
    ],
    "properties": {
        "agent": {
            "type": "string",
            "description": "Agent identifier",
            "enum": [
                "design-system-agent",
                "ux-composer-agent",
                "frontend-scaffold-agent",
                "backend-contract-agent",
                "security-policy-agent",
                "test-generation-agent",
                "ai-orchestration-agent"
            ]
        },
        "input_spec_hash": {
            "type": "string",
            "description": "Hash of the spec used as input",
            "pattern": "^3DC-SPEC-[0-9]{4}-[0-9]{2}-[0-9]{2}-[a-f0-9]+$"
        },
        "output_type": {
            "type": "string",
            "description": "Type of output produced"
        },
        "timestamp": {
            "type": "string",
            "format": "date-time"
        },
        "artifacts": {
            "type": "array",
            "items": {
                "type": "object",
                "required": [
                    "id",
                    "path",
                    "type"
                ],
                "properties": {
                    "id": {
                        "type": "string"
                    },
                    "path": {
                        "type": "string"
                    },
                    "type": {
                        "type": "string"
                    },
                    "checksum": {
                        "type": "string"
                    }
                }
            }
        },
        "assumptions": {
            "type": "array",
            "items": {
                "type": "string"
            },
            "description": "Assumptions made during generation"
        },
        "violations": {
            "type": "array",
            "items": {
                "type": "object",
                "properties": {
                    "rule": {
                        "type": "string"
                    },
                    "severity": {
                        "enum": [
                            "LOW",
                            "MEDIUM",
                            "HIGH",
                            "CRITICAL"
                        ]
                    },
                    "message": {
                        "type": "string"
                    }
                }
            },
            "description": "Rule violations detected - if not empty, output is rejected"
        }
    },
    "additionalProperties": false
}